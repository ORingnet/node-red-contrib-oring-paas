<script type="text/javascript">
  RED.nodes.registerType('oring-paas-thing', {
    category: 'ORing PaaS',
    defaults: {
      appConfig: {
        type: 'oring-paas-app-config',
        required: true,
      },
      name: {
        value: '',
        required: true,
      },
      thingId: {
        value: '',
        required: true,
      },
      validatePayload: {
        value: true,
        required: true,
      }
    },
    color: '#ea9514',
    icon: 'font-awesome/fa-microchip',
    inputs: 1,
    outputs: 1,
    label() {
      return this.name || 'oring paas thing';
    }
  });
</script>

<script type="text/html" data-template-name="oring-paas-thing">
  <div class="form-row">
    <label for="node-input-appConfig">App Config </label>
    <input type="text" id="node-input-appConfig" />
  </div>
  <div class="form-row">
    <label for="node-input-name">Thing Name </label>
    <input type="text" id="node-input-name" />
  </div>
  <div class="form-row">
    <label for="node-input-thingId">Thing Id </label>
    <input type="text" id="node-input-thingId" />
  </div>
  <div class="form-row">
    <label><i class="fa fa-cog"></i> Settings</label>
    <label for="node-input-validatePayload" style="width:70%">
    <input type="checkbox" id="node-input-validatePayload" style="display:inline-block; width:22px; vertical-align:baseline;"/>
    Validate payload before sending.
    </label>
  </div>
</script>

<script type="text/html" data-help-name="oring-paas-thing">
  <p>Create an end to end connection between ORing PaaS application and registerd thing.</p>

  <h3>Propertites</h3>
  <dl class="message-properties">
    <dt>App Config</dt>
    <dd>Please follow <a href="https://docs.paas.oringnet.cloud/#creating-an-api-key">this guide</a> to create an app and generate an api key.</dd>
    <dt>Thing Name <span class="property-type">string</span></dt>
    <dd>Thing's name.</dd>
    <dt>Thing Id <span class="property-type">string</span></dt>
    <dd>Thing's identity.</dd>
  </dl>

  <h3>Input</h3>
  <p>Define a command payload</p>
  <dl class="message-properties">
    <dt>topic <span class="property-type">string</span></dt>
    <dd>The command topic name.</dd>
    <dt>commandId <span class="property-type">string</span></dt>
    <dd>The id in the command payload.</dd>
    <dt>value <span class="property-type">string | number | boolean</span></dt>
    <dd>The value in the command payload.</dd>
  </dl>

  <h3>Output</h3>
  <dl class="message-properties">
    <dt>topic <span class="property-type">string</span></dt>
    <dd>The topic of message coming from</dd>
    <dt>type <span class="property-type">string</span></dt>
    <dd>Output message type, it will be used by dashboard adapter node.</dd>
    <dt>data.timestamp <span class="property-type">number</span></dt>
    <dd>Received data timestamp.</dd>
    <dt>data.values <span class="property-type">array</span></dt>
    <dd>Array of data payload, for more information please see <a href="https://docs.paas.oringnet.cloud/#data-topic">Topic payload definition.</a></dd>
  </dl>
</script>